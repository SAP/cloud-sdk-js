---
id: use-odata-v4-type-safe-client-for-javascript-typescript
title: Use the OData v4 client for JavaScript / TypeScript
sidebar_label: OData v4 client API
description: Use the SAP Cloud SDK for JavaScript to build and run OData v4 requests in a type-safe way.
keywords:
- sap
- cloud
- sdk
- odata
- JavaScript
- TypeScript
- consume
---

For more details on **how to execute requests** using a (pre-)generated OData client refer to [this documentation](./executing-a-request-using-a-generated-odata-v2-v4-client-with-sap-cloud-sdk-for-javascript).

## Making a request using a generated OData v4 client

### Filter

#### Filter on One-To-Many Navigation Properties

OData V4 introduces [lambda operators](http://docs.oasis-open.org/odata/odata/v4.01/odata-v4.01-part2-url-conventions.html#sec_LambdaOperators) e.g., `any`/`all`, so that the root property of the one-to-many navigation properties can be filtered.
Below is an example that demonstrates how to use the lambda operator [any](pathname:///api/1.28.1/modules/sap_cloud_sdk_core#any).

```ts
/*
  Get all people that have at least one friend that matches all the following conditions:
    - Has first name 'firstName'
    - Has last name 'lastName'
*/
.filter(
  any(
    People.FRIENDS.filter(
      People.FIRST_NAME.equals('firstName'),
      People.LAST_NAME.equals('lastName')
    )
  )
)
```
The generated `$filter` parameter of the URL will be:
```sql
$filter=(/any(a0:((a0/Friends/FirstName eq 'firstName' and a0/Friends/LastName eq 'lastName'))))
```

### Expand

#### Expand and Select

In contrast to the OData v2 implementation, you have `select` and `expand` separately.
In other words selected properties are not expanded automatically as in v2.

```ts
People.requestBuilder().getAll()
    .select(People.LAST_NAME)
    .expand(People.FRIENDS.select(People.FIRST_NAME,People.ADDRESS_INFO))
```

In the example above you select the `LAST_NAME` of the root entity and expand the navigation property `FRIENDS`.
In the expanded entity the selected fields are `FIRST_NAME` and `ADDRESS_INFO`.

The generated URL for this request will be:
```sql
/People?$select=LastName&$expand=Friends($select=FirstName,AddressInfo)
```
If no select is given, all non-navigational properties are included in the response.

#### Sub-queries in Expand

Note that you can crate very complex queries within the expand scope:
```ts
People.requestBuilder().getAll()
    .expand(People.FRIENDS
      .select(People.FIRST_NAME,People.ADDRESS_INFO)
      .filter(People.LAST_NAME.equals("Miller"))
      .orderBy(asc(People.GENDER))
      .top(1)
      .skip(1)
    )
```

In this example the filter will reduce the friends to be shown.
The effect of a filter depends whether it is used in or outside of an expand.
The different cases are explained in [Filters in Expand.](#filterParentChildren)

The URL for the query will be:
```sql
/People?$expand=Friends($select=FirstName,AddressInfo;$filter=(LastName eq 'Miller');$skip=1;$top=1)
```

#### Filter parent vs. Filter children <a name="filterParentChildren"/>

Depending on the context of the filter it will either filter the parent or the children.
In our example we have a `PERSON` related to 0..N `FRIENDS` which are both of type people.

If you want to get all people with first name `John` the query is:

```ts
People.requestBuilder().getAll()
    .filter(People.FIRST_NAME.equals('John'))
```

If you want to get all people who have at least one friend with first name `John` the query is:

```ts
People.requestBuilder().getAll().filter(People.FRIENDS
    .filter(
        any(People.FIRST_NAME.equals('John'))
    )
)
```
The lambda `all` would enforce that all friends must have first name `John`.
The two queries above filter the parent entity person.

In case you want to get all people but reduce the friends in the response, the filter has to be inside the expand:

```ts
People.requestBuilder().getAll()
    .expand(People.FRIENDS
        .filter(People.FIRST_NAME.equals('John'))
    )
```
This will return all persons but only the friends with name `John` will be included in the response.




